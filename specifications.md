# グリッドクリッカーゲーム 仕様書

## 1. ゲーム概要
グリッド状のフィールドに工場や関連施設を建設し、資金を稼いで都市を拡大・発展させるシミュレーションゲーム。
クリックによる能動的な収入と、施設による自動収入を組み合わせて成長を目指す。

## 2. 施設 (Buildings)

| ID | アイコン | 名前 | コスト | 基本収益 | 効果・特徴 |
| :--- | :---: | :--- | :--- | :--- | :--- |
| `factory_small` | 🔨 | 町工場 | 100¥ | 10¥/sec | 隣接する「町工場」1つにつき +5¥ のボーナス。 |
| `supply_depot` | 📦 | 資材倉庫 | 500¥ | 5¥/sec | **要研究**。隣接する工場の生産倍率を強化する（基本 1.2倍）。「物流最適化」で強化可能。 |
| `factory_large` | 🏭 | ハイテク工場 | 2,000¥ | 80¥/sec | **要研究**。基本収益が高い。「資材倉庫」と隣接すると +40¥ の固定ボーナス。 |
| `power_plant` | ⚡ | 火力発電所 | 5,000¥ | 0¥/sec | **要研究**。隣接する全施設の生産倍率を大幅強化（基本 1.5倍）。ただし「過負荷運転」スキルなどによりリスクも伴う。 |

※ 施設は建設時に最大寿命が設定され、時間経過で劣化・故障する。

## 3. テクノロジー / 研究スキル (Research)

スキルシステムは「アンロック型（最大Lv1）」と「無限強化型（最大Lv無限）」に分かれる。

### ティア1: 産業の夜明け
| ID | 名前 | コスト計算式 | 最大Lv | 効果詳細 |
| :--- | :--- | :--- | :--- | :--- |
| `tech_foundation` | 基礎産業技術 | `500 * 1.5^Lv` | ∞ | **全ての収益 +5% / Lv**。<br>生産効率の基礎となるスキル。 |
| `logistics_1` | 資材管理システム | `1,000` (固定) | 1 | **「資材倉庫」アンロック**。<br>物流網を構築可能にする。 |

### ティア2: 成長期
| ID | 名前 | コスト計算式 | 最大Lv | 最大Lv | 効果詳細 |
| :--- | :--- | :--- | :--- | :--- | :--- |
| `quality_control` | 品質管理プロセス | `2,000 * 1.4^Lv` | ∞ | **最大寿命 +50% / Lv**。<br>施設の耐久性を向上させ、建て替え頻度を減らす。 |
| `mass_production` | 大量生産ライン | `3,000` (固定) | 1 | **「ハイテク工場」アンロック**。<br>より高度な生産施設を建設可能にする。 |
| `logistics_2` | 物流最適化 | `4,000 * 1.6^Lv` | ∞ | **資材倉庫バフ効果 +10% / Lv**。<br>基本1.20倍に対し、Lv1で1.30倍、Lv2で1.40倍...と加算される。 |

### ティア3: 産業革命
| ID | 名前 | コスト計算式 | 最大Lv | 効果詳細 |
| :--- | :--- | :--- | :--- | :--- |
| `power_grid` | 電力網整備 | `8,000` (固定) | 1 | **「火力発電所」アンロック**。<br>強力なエリアブースト施設。 |
| `automated_maintenance` | 自動メンテナンス | `6,000 * 1.5^Lv` | 18 | **寿命減少速度 -5% / Lv** (最大90%削減)。<br>施設の劣化を遅らせる。 |
| `overload_operation` | 過負荷運転 | `10,000 * 2.0^Lv` | ∞ | **発電所効果 +50% / Lv & 寿命減少速度 +50% / Lv**。<br>「諸刃の剣」スキル。生産性は爆発的に上がるが、施設の故障も早まる。 |

## 4. その他システム

### 4.1 クリック強化 (Click Upgrades)
- **労働効率改善**: クリック時の収入を強化。
- コスト: `500 * 1.5^Lv`
- アップグレード毎にクリック単価が +50¥ 増加。

### 4.2 寿命システム (Maintenance System)
- `factory` 属性を持つ施設（主に工場）は、設置から一定時間（基本300秒）で寿命を迎える。
- 研究「品質管理プロセス」で最大寿命を延ばせる。
- 研究「自動メンテナンス」で寿命の減少速度を抑えられる。
- 寿命が尽きると「故障(Broken)」状態になり、収益が発生しなくなる。修理が必要。
- 全ての故障施設を一括修理する機能あり。

### 4.3 オフライン進行
- ゲームを閉じていても、再開時に経過時間分の収益を獲得できる（最大24時間分）。

## 5. データ管理
- ブラウザの LocalStorage に `gridClickerSave` として保存。
- 自動セーブ（5秒毎）および重要アクション時にセーブ。
- 旧バージョンからのデータ移行ロジック実装済み（既存の習得スキルはLv1として継承）。
